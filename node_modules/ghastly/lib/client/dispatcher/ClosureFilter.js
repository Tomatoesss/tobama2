'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _lang = require('lodash/lang');

var _PrefixFilter = require('./PrefixFilter');

var _PrefixFilter2 = _interopRequireDefault(_PrefixFilter);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * Filters out messages based on the return value of a closure.
 * @implements {PrefixFilter}
 * @ignore
 */
class ClosureFilter extends _PrefixFilter2.default {
  /**
   * Constructor.
   * @param {Function} filter - The filter.
   * @throws {TypeError} Thrown if the filter is not a function.
   */
  constructor(filter) {
    if (!(0, _lang.isFunction)(filter)) {
      throw new TypeError('Expected filter to be a function.');
    }

    super(filter);
  }

  /**
   * Tests a message and determines if it passes the filter.
   * @param {Message} message - The message.
   * @returns {boolean} `true` if the message passes the filter, else `false`.
   */
  test(message) {
    return this.filter(message);
  }
}
exports.default = ClosureFilter;