'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _lang = require('lodash/lang');

var _PrefixFilter = require('./PrefixFilter');

var _PrefixFilter2 = _interopRequireDefault(_PrefixFilter);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * Filters out messages based on a RegEx.
 * @implements {PrefixFilter}
 * @ignore
 */
class RegexFilter extends _PrefixFilter2.default {
  /**
   * Constructor.
   * @param {string} filter - The filter.
   * @throws {TypeError} Thrown if the filter is not a string.
   */
  constructor(filter) {
    if (!(0, _lang.isString)(filter)) {
      throw new TypeError('Expected filter to be a string.');
    }

    super(new RegExp(filter));
  }

  /**
   * Tests a message and determines if it passes the filter.
   * @param {Message} message - The message.
   * @returns {boolean} `true` if the message passes the filter, else `false`.
   */
  test(message) {
    return this.filter.test(message.content);
  }
}
exports.default = RegexFilter;